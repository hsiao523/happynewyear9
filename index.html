<!DOCTYPE html>
<html lang="zh-Hant">
<head>
Â  Â  <meta charset="UTF-8">
Â  Â  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
Â  Â  <meta property="og:title" content="é»æˆ‘åˆ®å¤§çï¼è²¡ç¥é»ååˆ®åˆ®æ¨‚">
Â  Â  <meta property="og:description" content="é¦¬ä¸Šåˆ®,é¦¬ä¸Šä¸­">
Â  Â  <meta property="og:image" content="https://hsiao523.github.io/happynewyear9/title.jpg">
Â  Â  <title>è²¡ç¥é»ååˆ®åˆ®æ¨‚</title>
Â  Â  <style>
Â  Â  Â  Â  * {
Â  Â  Â  Â  Â  Â  box-sizing: border-box;
Â  Â  Â  Â  Â  Â  -webkit-touch-callout: none;
Â  Â  Â  Â  Â  Â  -webkit-user-select: none;
Â  Â  Â  Â  }

Â  Â  Â  Â  body {
Â  Â  Â  Â  Â  Â  margin: 0;
Â  Â  Â  Â  Â  Â  padding: 0;
Â  Â  Â  Â  Â  Â  width: 100vw;
Â  Â  Â  Â  Â  Â  height: 100vh;
Â  Â  Â  Â  Â  Â  background: url('https://hsiao523.github.io/happynewyear9/background.jpg') no-repeat center center;
Â  Â  Â  Â  Â  Â  background-size: cover;
Â  Â  Â  Â  Â  Â  display: flex;
Â  Â  Â  Â  Â  Â  align-items: flex-start;
Â  Â  Â  Â  Â  Â  justify-content: center;
Â  Â  Â  Â  Â  Â  overflow: hidden;
Â  Â  Â  Â  Â  Â  touch-action: none;
Â  Â  Â  Â  Â  Â  font-family: "Microsoft JhengHei", sans-serif;
Â  Â  Â  Â  }

Â  Â  Â  Â  .grid-container {
Â  Â  Â  Â  Â  Â  display: grid;
Â  Â  Â  Â  Â  Â  grid-template-columns: repeat(3, 90px);
Â  Â  Â  Â  Â  Â  grid-template-rows: repeat(3, 80px);
Â  Â  Â  Â  Â  Â  gap: 6px;
Â  Â  Â  Â  Â  Â  padding: 15px;
Â  Â  Â  Â  Â  Â  margin-top: 52vh;
Â  Â  Â  Â  Â  Â  background: rgba(0, 0, 0, 0.1);Â 
Â  Â  Â  Â  Â  Â  border-radius: 15px;
Â  Â  Â  Â  Â  Â  position: relative;
Â  Â  Â  Â  }

Â  Â  Â  Â  .scratch-card {
Â  Â  Â  Â  Â  Â  position: relative;
Â  Â  Â  Â  Â  Â  width: 90px;
Â  Â  Â  Â  Â  Â  height: 80px;
Â  Â  Â  Â  Â  Â  background: #fff3e0;
Â  Â  Â  Â  Â  Â  border-radius: 10px;
Â  Â  Â  Â  Â  Â  display: flex;
Â  Â  Â  Â  Â  Â  align-items: center;
Â  Â  Â  Â  Â  Â  justify-content: center;
Â  Â  Â  Â  Â  Â  font-size: 2.2rem;
Â  Â  Â  Â  Â  Â  box-shadow: inset 0 0 10px rgba(0,0,0,0.1);
Â  Â  Â  Â  }

Â  Â  Â  Â  .particle-canvas {
Â  Â  Â  Â  Â  Â  position: absolute;
Â  Â  Â  Â  Â  Â  top: 0;
Â  Â  Â  Â  Â  Â  left: 0;
Â  Â  Â  Â  Â  Â  width: 100%;
Â  Â  Â  Â  Â  Â  height: 100%;
Â  Â  Â  Â  Â  Â  pointer-events: none;
Â  Â  Â  Â  Â  Â  z-index: 3;
Â  Â  Â  Â  }

Â  Â  Â  Â  .scratch-canvas {
Â  Â  Â  Â  Â  Â  position: absolute;
Â  Â  Â  Â  Â  Â  top: 0;
Â  Â  Â  Â  Â  Â  left: 0;
Â  Â  Â  Â  Â  Â  width: 100%;
Â  Â  Â  Â  Â  Â  height: 100%;
Â  Â  Â  Â  Â  Â  cursor: crosshair;
Â  Â  Â  Â  Â  Â  touch-action: none;
Â  Â  Â  Â  Â  Â  border-radius: 10px;
Â  Â  Â  Â  Â  Â  transition: opacity 0.4s ease;
Â  Â  Â  Â  Â  Â  z-index: 2;
Â  Â  Â  Â  }

Â  Â  Â  Â  #result-modal {
Â  Â  Â  Â  Â  Â  display: none;
Â  Â  Â  Â  Â  Â  position: fixed;
Â  Â  Â  Â  Â  Â  top: 50%;
Â  Â  Â  Â  Â  Â  left: 50%;
Â  Â  Â  Â  Â  Â  transform: translate(-50%, -50%);
Â  Â  Â  Â  Â  Â  background: rgba(255, 255, 255, 0.98);
Â  Â  Â  Â  Â  Â  padding: 25px;
Â  Â  Â  Â  Â  Â  border-radius: 20px;
Â  Â  Â  Â  Â  Â  box-shadow: 0 0 40px rgba(0,0,0,0.6);
Â  Â  Â  Â  Â  Â  z-index: 1000;
Â  Â  Â  Â  Â  Â  text-align: center;
Â  Â  Â  Â  Â  Â  width: 85%;
Â  Â  Â  Â  Â  Â  max-width: 320px;
Â  Â  Â  Â  Â  Â  border: 5px solid #d32f2f;
Â  Â  Â  Â  }

Â  Â  Â  Â  #modal-title { color: #d32f2f; font-size: 1.5rem; margin-bottom: 10px; font-weight: bold; }
Â  Â  Â  Â  #modal-text { font-size: 1.3rem; font-weight: bold; line-height: 1.6; color: #333; }
Â  Â  Â  Â  .modal-btn { background: #d32f2f; color: white; border: none; padding: 12px 25px; border-radius: 50px; margin-top: 20px; font-size: 1.1rem; cursor: pointer; font-weight: bold; }
Â  Â  </style>
</head>
<body>

Â  Â  <div class="grid-container" id="grid"></div>

Â  Â  <div id="result-modal">
Â  Â  Â  Â  <div id="modal-emoji" style="font-size: 3.5rem; margin-bottom: 10px;">ğŸŠ</div>
Â  Â  Â  Â  <div id="modal-title">è²¡ç¥å ±å–œ</div>
Â  Â  Â  Â  <div id="modal-text"></div>
Â  Â  Â  Â  <button class="modal-btn" onclick="closeModal()">å†ç©ä¸€æ¬¡</button>
Â  Â  </div>

Â  Â  <script>
Â  Â  Â  Â  // ã€è¨­å®šå€ 1ã€‘ä¸€èˆ¬è³€è© (åªå¯«å¾ŒåŠæ®µç¥è³€èª)
Â  Â  Â  Â  // ç¨‹å¼æœƒè‡ªå‹•åœ¨å‰é¢åŠ ä¸Š "åˆ®ä¸­ (n) å€‹ (ç¬¦è™Ÿ)ï¼Œ"
Â  Â  Â  Â  const normalMap = {
Â  Â  Â  Â  Â  Â  'ğŸ’°': "ä»Šå¹´è³ºå¤§éŒ¢ï¼",
Â  Â  Â  Â  Â  Â  'ğŸ§§': "ä»Šå¹´ç´…åˆ©é ˜ä¸å®Œï¼",
Â  Â  Â  Â  Â  Â  'ğŸ’': "é‡‘éŠ€ç å¯¶æ»¿åé–“ï¼",
Â  Â  Â  Â  Â  Â  'ğŸŠ': "å¤§å‰å¤§åˆ©ç™¼å¤§è²¡ï¼",
Â  Â  Â  Â  Â  Â  'âœ¨': "ä»Šå¹´é‹å‹¢äº®æ™¶æ™¶ï¼",
Â  Â  Â  Â  Â  Â  'ğŸ': "ä»Šå¹´å¹´é ­æ—ºåˆ°å¹´å°¾ï¼",
Â  Â  Â  Â  Â  Â  'ğŸ§¨': "å¤©å¤©ä¸­å¤§çï¼Œé•ç‚®éŸ¿ä¸åœï¼"
Â  Â  Â  Â  };

Â  Â  Â  Â  // ã€è¨­å®šå€ 2ã€‘9 å€‹å…¨ä¸­æ™‚çš„ç‰¹åˆ¥è³€è© (ä¸å—å½±éŸ¿ï¼Œé¡¯ç¤ºå®Œæ•´å¥å­)
Â  Â  Â  Â  const superMap = {
Â  Â  Â  Â  Â  Â  'ğŸ’°': "ã€çµ‚æ¥µè²¡ç¥ã€‘9å€‹ğŸ’°å…¨é–‹ï¼å¯Œç”²å¤©ä¸‹ï¼",
Â  Â  Â  Â  Â  Â  'ğŸ§§': "ã€ç´…åŒ…ä¹‹ç‹ã€‘9å€‹ğŸ§§å…¨é–‹ï¼è²¡åº«æ»¿ç›ˆï¼",
Â  Â  Â  Â  Â  Â  'ğŸ’': "ã€è‡³å°Šç å¯¶ã€‘9å€‹ğŸ’å…¨é–‹ï¼å¯Œè²´ä¸€ç”Ÿï¼",
Â  Â  Â  Â  Â  Â  'ğŸŠ': "ã€è¶…ç´šå¤§å‰ã€‘9å€‹ğŸŠå…¨é–‹ï¼è¬äº‹å¤§äº¨é€šï¼",
Â  Â  Â  Â  Â  Â  'âœ¨': "ã€ç¥å…‰æ™®ç…§ã€‘9å€‹âœ¨å…¨é–‹ï¼é‹å‹¢ç„¡æ•µå¼·ï¼",
Â  Â  Â  Â  Â  Â  'ğŸ': "ã€è¶…ç´šæ—ºä¾†ã€‘9å€‹ğŸå…¨é–‹ï¼å¥½é‹çˆ†æ£šäº†ï¼",
Â  Â  Â  Â  Â  Â  'ğŸ§¨': "ã€å¤§çè‡¨é–€ã€‘9å€‹ğŸ§¨å…¨é–‹ï¼é©šå–œé€£é€£ç™¼ï¼"
Â  Â  Â  Â  };

Â  Â  Â  Â  const gridElement = document.getElementById('grid');
Â  Â  Â  Â  const modal = document.getElementById('result-modal');
Â  Â  Â  Â  const modalText = document.getElementById('modal-text');
Â  Â  Â  Â Â 
Â  Â  Â  Â  let clearedCount = 0;
Â  Â  Â  Â  let winner = { symbol: '', count: 0 };

Â  Â  Â  Â  // é‡‘ç²‰ç²’å­ç‰¹æ•ˆ
Â  Â  Â  Â  class Particle {
Â  Â  Â  Â  Â  Â  constructor(x, y) {
Â  Â  Â  Â  Â  Â  Â  Â  this.x = x; this.y = y;
Â  Â  Â  Â  Â  Â  Â  Â  this.size = Math.random() * 3 + 1;
Â  Â  Â  Â  Â  Â  Â  Â  this.speedX = Math.random() * 2 - 1;
Â  Â  Â  Â  Â  Â  Â  Â  this.speedY = Math.random() * 2 - 1;
Â  Â  Â  Â  Â  Â  Â  Â  this.color = `rgba(255, ${215 + Math.random() * 40}, 0, ${Math.random() * 0.8 + 0.2})`;
Â  Â  Â  Â  Â  Â  Â  Â  this.life = 1;
Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  Â  Â  update() { this.x += this.speedX; this.y += this.speedY; this.life -= 0.02; }
Â  Â  Â  Â  Â  Â  draw(ctx) { ctx.fillStyle = this.color; ctx.beginPath(); ctx.arc(this.x, this.y, this.size, 0, Math.PI * 2); ctx.fill(); }
Â  Â  Â  Â  }

Â  Â  Â  Â  function initGame() {
Â  Â  Â  Â  Â  Â  gridElement.innerHTML = '';
Â  Â  Â  Â  Â  Â  clearedCount = 0;
Â  Â  Â  Â  Â  Â  modal.style.display = 'none';

Â  Â  Â  Â  Â  Â  const keys = Object.keys(normalMap);
Â  Â  Â  Â  Â  Â  // è¨­å®šæ©Ÿç‡ï¼šéš¨æ©Ÿæ±ºå®šé€™æ¬¡æœƒå‡ºç¾å¹¾å€‹ç›¸åŒç¬¦è™Ÿ (5, 6, 8, æˆ– 9)
Â  Â  Â  Â  Â  Â  const countsToPick = [5, 6, 8, 9];
Â  Â  Â  Â  Â  Â  const targetCount = countsToPick[Math.floor(Math.random() * countsToPick.length)];
Â  Â  Â  Â  Â  Â  const targetSymbol = keys[Math.floor(Math.random() * keys.length)];
Â  Â  Â  Â  Â  Â Â 
Â  Â  Â  Â  Â  Â  winner = { symbol: targetSymbol, count: targetCount };

Â  Â  Â  Â  Â  Â  let board = new Array(9).fill(null);
Â  Â  Â  Â  Â  Â  // éš¨æ©Ÿåˆ†é…ä½ç½®
Â  Â  Â  Â  Â  Â  let indices = [0,1,2,3,4,5,6,7,8].sort(() => Math.random() - 0.5);
Â  Â  Â  Â  Â  Â Â 
Â  Â  Â  Â  Â  Â  // å¡«å…¥ä¸­çç¬¦è™Ÿ
Â  Â  Â  Â  Â  Â  for(let i=0; i < targetCount; i++) {
Â  Â  Â  Â  Â  Â  Â  Â  board[indices[i]] = targetSymbol;
Â  Â  Â  Â  Â  Â  }

Â  Â  Â  Â  Â  Â  // å¡«å…¥å…¶ä»–é›œè¨Šç¬¦è™Ÿ
Â  Â  Â  Â  Â  Â  for(let i=0; i<9; i++) {
Â  Â  Â  Â  Â  Â  Â  Â  if(board[i] === null) {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  let randomSym;
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  do {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  randomSym = keys[Math.floor(Math.random() * keys.length)];
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  } while (randomSym === targetSymbol);
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  board[i] = randomSym;
Â  Â  Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  Â  Â  board.forEach(sym => createScratchCard(sym));
Â  Â  Â  Â  }

Â  Â  Â  Â  function createScratchCard(symbol) {
Â  Â  Â  Â  Â  Â  const card = document.createElement('div');
Â  Â  Â  Â  Â  Â  card.className = 'scratch-card';
Â  Â  Â  Â  Â  Â  card.innerHTML = `<span>${symbol}</span>`;

Â  Â  Â  Â  Â  Â  const pCanvas = document.createElement('canvas');
Â  Â  Â  Â  Â  Â  pCanvas.className = 'particle-canvas';
Â  Â  Â  Â  Â  Â  const pCtx = pCanvas.getContext('2d');
Â  Â  Â  Â  Â  Â Â 
Â  Â  Â  Â  Â  Â  const sCanvas = document.createElement('canvas');
Â  Â  Â  Â  Â  Â  sCanvas.className = 'scratch-canvas';
Â  Â  Â  Â  Â  Â  const sCtx = sCanvas.getContext('2d');

Â  Â  Â  Â  Â  Â  card.appendChild(pCanvas);
Â  Â  Â  Â  Â  Â  card.appendChild(sCanvas);
Â  Â  Â  Â  Â  Â  gridElement.appendChild(card);

Â  Â  Â  Â  Â  Â  pCanvas.width = sCanvas.width = 90;
Â  Â  Â  Â  Â  Â  pCanvas.height = sCanvas.height = 80;

Â  Â  Â  Â  Â  Â  const gradient = sCtx.createLinearGradient(0, 0, 90, 80);
Â  Â  Â  Â  Â  Â  gradient.addColorStop(0, '#C0C0C0');
Â  Â  Â  Â  Â  Â  gradient.addColorStop(1, '#A9A9A9');
Â  Â  Â  Â  Â  Â  sCtx.fillStyle = gradient;
Â  Â  Â  Â  Â  Â  sCtx.fillRect(0, 0, 90, 80);

Â  Â  Â  Â  Â  Â  let particles = [];
Â  Â  Â  Â  Â  Â  let isDrawing = false;
Â  Â  Â  Â  Â  Â  let isRemoved = false;

Â  Â  Â  Â  Â  Â  function animate() {
Â  Â  Â  Â  Â  Â  Â  Â  pCtx.clearRect(0, 0, 90, 80);
Â  Â  Â  Â  Â  Â  Â  Â  particles.forEach((p, i) => {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  p.update(); p.draw(pCtx);
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  if (p.life <= 0) particles.splice(i, 1);
Â  Â  Â  Â  Â  Â  Â  Â  });
Â  Â  Â  Â  Â  Â  Â  Â  if (!isRemoved || particles.length > 0) requestAnimationFrame(animate);
Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  Â  Â  animate();

Â  Â  Â  Â  Â  Â  function scratch(e) {
Â  Â  Â  Â  Â  Â  Â  Â  if (!isDrawing || isRemoved) return;
Â  Â  Â  Â  Â  Â  Â  Â  const rect = sCanvas.getBoundingClientRect();
Â  Â  Â  Â  Â  Â  Â  Â  const x = (e.touches ? e.touches[0].clientX : e.clientX) - rect.left;
Â  Â  Â  Â  Â  Â  Â  Â  const y = (e.touches ? e.touches[0].clientY : e.clientY) - rect.top;
Â  Â  Â  Â  Â  Â  Â  Â  for (let i = 0; i < 5; i++) particles.push(new Particle(x, y));
Â  Â  Â  Â  Â  Â  Â  Â  sCtx.globalCompositeOperation = 'destination-out';
Â  Â  Â  Â  Â  Â  Â  Â  sCtx.beginPath();
Â  Â  Â  Â  Â  Â  Â  Â  sCtx.arc(x, y, 18, 0, Math.PI * 2);
Â  Â  Â  Â  Â  Â  Â  Â  sCtx.fill();
Â  Â  Â  Â  Â  Â  Â  Â  checkScratchPercent(sCanvas, sCtx);
Â  Â  Â  Â  Â  Â  }

Â  Â  Â  Â  Â  Â  function checkScratchPercent(canvas, ctx) {
Â  Â  Â  Â  Â  Â  Â  Â  if (isRemoved) return;
Â  Â  Â  Â  Â  Â  Â  Â  const imageData = ctx.getImageData(0, 0, 90, 80);
Â  Â  Â  Â  Â  Â  Â  Â  const pixels = imageData.data;
Â  Â  Â  Â  Â  Â  Â  Â  let transparentPixels = 0;
Â  Â  Â  Â  Â  Â  Â  Â  for (let i = 0; i < pixels.length; i += 4) if (pixels[i + 3] < 150) transparentPixels++;
Â  Â  Â  Â  Â  Â  Â  Â Â 
Â  Â  Â  Â  Â  Â  Â  Â  if ((transparentPixels / (90 * 80)) > 0.55) {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  isRemoved = true;
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  canvas.style.opacity = '0';
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  clearedCount++;
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  setTimeout(() => canvas.remove(), 400);
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  if (clearedCount === 9) showResult();
Â  Â  Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  Â  Â  }

Â  Â  Â  Â  Â  Â  sCanvas.addEventListener('mousedown', () => isDrawing = true);
Â  Â  Â  Â  Â  Â  sCanvas.addEventListener('touchstart', (e) => { isDrawing = true; e.preventDefault(); });
Â  Â  Â  Â  Â  Â  window.addEventListener('mouseup', () => isDrawing = false);
Â  Â  Â  Â  Â  Â  window.addEventListener('touchend', () => isDrawing = false);
Â  Â  Â  Â  Â  Â  sCanvas.addEventListener('mousemove', scratch);
Â  Â  Â  Â  Â  Â  sCanvas.addEventListener('touchmove', (e) => { scratch(e); e.preventDefault(); });
Â  Â  Â  Â  }

Â  Â  Â  Â  // ã€é‡é»ä¿®æ”¹å€ã€‘ï¼šé¡¯ç¤ºçµæœçš„é‚è¼¯
Â  Â  Â  Â  function showResult() {
Â  Â  Â  Â  Â  Â  const emojiEl = document.getElementById('modal-emoji');
Â  Â  Â  Â  Â  Â Â 
Â  Â  Â  Â  Â  Â  if (winner.count === 9) {
Â  Â  Â  Â  Â  Â  Â  Â  // 9 å€‹å…¨ä¸­ï¼šä½¿ç”¨ç‰¹åˆ¥è³€è© (æ–‡å­—ç›´æ¥å–è‡ª superMap)
Â  Â  Â  Â  Â  Â  Â  Â  modalText.innerText = superMap[winner.symbol];
Â  Â  Â  Â  Â  Â  Â  Â  emojiEl.innerText = "ğŸ§§";
Â  Â  Â  Â  Â  Â  } else {
Â  Â  Â  Â  Â  Â  Â  Â  // ä¸€èˆ¬ä¸­ç (5, 6, 8 å€‹)ï¼š
Â  Â  Â  Â  Â  Â  Â  Â  // é€™è£¡æœƒè‡ªå‹•çµ„åˆæˆï¼šã€Œåˆ®ä¸­ (æ•¸é‡) å€‹ (ç¬¦è™Ÿ)ï¼Œ(å‰ç¥¥è©±)ã€
Â  Â  Â  Â  Â  Â  Â  Â  modalText.innerText = `åˆ®ä¸­${winner.count}å€‹${winner.symbol}ï¼Œ${normalMap[winner.symbol]}`;
Â  Â  Â  Â  Â  Â  Â  Â  emojiEl.innerText = "ğŸŠ";
Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  Â  Â Â 
Â  Â  Â  Â  Â  Â  setTimeout(() => { modal.style.display = 'block'; }, 500);
Â  Â  Â  Â  }

Â  Â  Â  Â  function closeModal() { initGame(); }
Â  Â  Â  Â  initGame();
Â  Â  </script>
</body>
</html>
